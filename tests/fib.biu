(extern-raw + (=> Number Number Number) "add")
(extern-raw - (=> Number Number Number) "sub")
(extern-raw * (=> Number Number Number) "mul")
(extern-raw / (=> Number Number Number) "__div")
(extern-raw sin (=> Number Number) "__sin")
(extern-raw = (=> Number Number Bool) "equal")
(extern-raw > (=> Number Number Bool) "greater")
(extern-raw < (=> Number Number Bool) "less")
(extern-raw char-equal? (=> Char Char Bool) "equal_char")
(extern-raw print (=> Number Number) "print")
(extern-raw cos (=> Number Number) "cosclosure")
(extern-raw sin (=> Number Number) "sinclosure")
(extern-raw getchar (=> Char) "getcharclosure")
(extern-raw putchar (=> Char Number) "putcharclosure")
(extern-raw number->char (=> Number Char) "numbertocharclosure")
(extern-raw char->number (=> Char Number) "chartonumberclosure")

(define (fib (n Number)
             (arr (Array Number)))
  (set! arr 0 0)
  (set! arr 1 1)

  (define ((loop Number) (idx Number))
    (define (update)
      (set! arr idx (+ (get arr (- idx 1))
                       (get arr (- idx 2))))
      (loop (+ idx 1)))
    (if (= idx n)
      (get arr (- n 1))
      (update)))

  (loop 2))

(define a (make-array Number 10))
(fib 10 a)
(print (get a 9))
